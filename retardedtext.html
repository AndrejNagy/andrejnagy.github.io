<html>
    <body>
        <script>
            function generateRetardedText() {
                var retarded_input = document.getElementById("retarded_input")
                var retarded_button = document.getElementById("retarded_button")
                var retarded_output = document.getElementById("retarded_output")
                var regular_value = retarded_input.value;
                var retarded_value = "";
                var last_change = true;
                var number_of_same_changes = 1;
                for (var i = 0; i < regular_value.length; i++){
                    if (number_of_same_changes >= 3){
                        if (last_change){retarded_value = retarded_value + regular_value[i]; number_of_same_changes=1;}
                        else {retarded_value = retarded_value + regular_value[i].toUpperCase(); number_of_same_changes=1;}
                    }
                    else {
                        if (Math.round(Math.random())){
                            if (last_change){number_of_same_changes++;} else {number_of_same_changes=1;}
                            retarded_value = retarded_value + regular_value[i].toUpperCase()
                            last_change = true
                        }
                        else {
                            if (!last_change){number_of_same_changes++;} else {number_of_same_changes=1;}
                            retarded_value = retarded_value + regular_value[i]
                            last_change = false
                        }
                    }
                }
                retarded_output.textContent = retarded_value
            }
            </script>
        <input type="text" id="retarded_input"/><button onclick="generateRetardedText();"id="retarded_button">Generate retarded text</button><br/>
        <span id="retarded_output"></span>
    </body>
</html>
